#!/usr/bin/env bash
# This script displays information about DNS records for specified subdomains.

# Function to extract record type and destination IP from dig output
get_record_info() {
    dig +short "$1" | awk 'BEGIN {FS=" "} {print $1, $NF}'
}

# Main function to handle subdomain checks
check_subdomains() {
    local domain="$1"
    local subdomains="${2:-www lb-01 web-01 web-02}"  # Default to all if not specified

    for subdomain in $subdomains; do
        record_info=$(get_record_info "$subdomain.$domain")

        if [[ -n "$record_info" ]]; then  # Check for successful dig output
            echo "The subdomain $subdomain is a ${record_info% *} record and points to ${record_info#* }"
        else
            echo "No DNS record found for subdomain $subdomain.$domain"
        fi
    done
}

# Execute the main function if called directly
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
    check_subdomains "$@"  # Pass all arguments to the function
fi
